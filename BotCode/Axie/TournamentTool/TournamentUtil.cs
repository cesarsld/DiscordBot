using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using DiscordBot.Axie;
using Newtonsoft.Json.Linq;

namespace DiscordBot.Axie.TournamentTool
{
    class TournamentUtility
    {

        public static Discord.EmbedBuilder GetPreBattleData(JObject script)
        {
            JArray fighterArray = JArray.FromObject(script["metadata"]["fighters"]);
            var entityArray = new BattleEntity[6];
            int i = 0;
            foreach (var fighter in fighterArray)
            {
                entityArray[i] = fighter.ToObject<BattleEntity>();
                i++;
            }
            var embed = new Discord.EmbedBuilder();
            embed.WithTitle("Pre battle stats");
            for (i = 0; i < 2; i++)
            {
                embed.AddField($"Team {i + 1}", "---------------");
                for (int j = 0; j < 3; j++)
                {
                    embed.AddInlineField($"Axie #{entityArray[j + (3 * i)].id}", entityArray[j + (3 * i)].GetRatings() + entityArray[j + (3 * i)].GetStats() + entityArray[j + (3 * i)].GetMoveset());
                }
            }
            embed.WithColor(Discord.Color.Red);
            return embed;
        }

        public static Discord.EmbedBuilder GetPostBattleData(JObject script)
        {
            JArray fighterArray = JArray.FromObject(script["metadata"]["fighters"]);
            var entityArray = new PostBattleEntity[6];
            int i = 0;
            foreach (var fighter in fighterArray)
            {
                entityArray[i] = fighter.ToObject<PostBattleEntity>();
                i++;
            }
            var rounds = JArray.FromObject(script["rounds"]);
            foreach (var round in rounds)
            {
                var turns = JArray.FromObject(round["turns"]);
                foreach (var turn in turns)
                {
                    var attacker = entityArray.FirstOrDefault(a => a.id == (int)turn["attacker"]);
                    if ((bool)turn["hit"])
                    {
                        attacker.addDmgDealt((int)turn["damageDealt"]);
                        if ((bool)turn["critical"])
                            attacker.AddCrit((int)turn["damageDealt"]);
                        if (turn["defender"] != null)
                        {
                            var defender = entityArray.FirstOrDefault(a => a.id == (int)turn["defender"]);
                            defender.addDmgTaken((int)turn["damageDealt"]);
                        }
                    }
                    var effects = JArray.FromObject(turn["effectsApplied"]);
                    foreach (var effect in effects)
                    {
                        if ((string)effect["id"] == "heal-target")
                        {
                            entityArray.FirstOrDefault(a => a.id == (int)effect["targets"][0]).healingR((int)effect["extra"]["totalHealed"]);
                        }
                    }
                    if ((bool)turn["counter"])
                    {

                    }
                    var postEffect = JArray.FromObject(turn["postTurnState"]);
                    foreach (var state in postEffect)
                    {
                        var buffs = JArray.FromObject(state["buffs"]);
                        foreach (var buff in buffs)
                        {
                            if ((string)buff["id"] == "poison" && (int)state["hp"] > 0)
                                entityArray.FirstOrDefault(a => a.id == (int)state["id"]).addPoisonTick();
                        }
                    }
                }
            }

            var embed = new Discord.EmbedBuilder();
            for (i = 0; i < 2; i++)
            {
                embed.AddField($"Team {i + 1}", "---------------");
                for (int j = 0; j < 3; j++)
                {
                    embed.AddInlineField($"Axie #{entityArray[j + (3 * i)].id}", $"Damage done : {entityArray[j + (3 * i)].GetDamageDealt()}\n"+
                                                                                 $"Damage taken : {entityArray[j + (3 * i)].GetDamageTaken()}\n"+
                                                                                 $"Poison damage taken : {entityArray[j + (3 * i)].GetPoisonDamageDealt()}\n"+
                                                                                 $"Healing received : {entityArray[j + (3 * i)].GetHealingReceived()}\n"+
                                                                                 $"Crits done : {entityArray[j + (3 * i)].GetCrits()}\n"+
                                                                                 $"Highest crit : {entityArray[j + (3 * i)].GetHighestCrit()}\n");
                }
            }
            embed.WithColor(Discord.Color.Red);
            return embed;
        }
    }
}
//{"metadata":{"fighters":[{"id":"1666","class":"beast","team":0,"position":4,"stats":{"hp":31,"speed":43,"morale":59,"skill":31,"totalLastStand":4},"moveSet":[{"index":4,"part":{"id":"mouth-nut-cracker","name":"Nut Cracker","class":"beast","type":"mouth","mystic":false,"region":"global","stage":1,"moves":[{"id":"nut-crack","name":"Nut Crack","type":"melee","attack":20,"defense":7,"accuracy":90,"stage":1,"effects":[{"name":"Synchronized","type":"passive","description":"+2 Attack for each other 'Cracker' part on self."}]}]},"move":{"id":"nut-crack","name":"Nut Crack","type":"melee","attack":20,"defense":7,"accuracy":90,"stage":1,"effects":["synchronized-passive"]}},{"index":1,"part":{"id":"tail-the-last-one","name":"The Last One","class":"bird","type":"tail","mystic":false,"region":"global","stage":1,"moves":[{"id":"risky-feather","name":"Risky Feather","type":"ranged","attack":31,"defense":1,"accuracy":82,"stage":1,"effects":[{"name":"Sitting Duck","type":"active","description":"Apply a 'Sitting Duck' debuff to the user for 2 turns. Axie with this debuff cannot defend."}]}]},"move":{"id":"risky-feather","name":"Risky Feather","type":"ranged","attack":31,"defense":1,"accuracy":82,"stage":1,"effects":["sitting-duck-active"]}},{"index":2,"part":{"id":"back-hero","name":"Hero","class":"beast","type":"back","mystic":false,"region":"global","stage":1,"moves":[{"id":"tactical-combat","name":"Tactical Combat","type":"melee","attack":20,"defense":8,"accuracy":90,"stage":1,"effects":[{"name":"Smart Strike","type":"passive","description":"The user cannot be countered when using this move."}]}]},"move":{"id":"tactical-combat","name":"Tactical Combat","type":"melee","attack":20,"defense":8,"accuracy":90,"stage":1,"effects":["smart-strike-passive"]}},{"index":3,"part":{"id":"horn-little-branch","name":"Little Branch","class":"beast","type":"horn","mystic":false,"region":"global","stage":1,"moves":[{"id":"branch-flap","name":"Branch Flap","type":"melee","attack":20,"defense":6,"accuracy":94,"stage":1,"effects":[{"name":"Plant Companion","type":"passive","description":"+3 Attack if an allied plant move was executed in the last turn."}]}]},"move":{"id":"branch-flap","name":"Branch Flap","type":"melee","attack":20,"defense":6,"accuracy":94,"stage":1,"effects":["plant-companion-passive"]}}]},{"id":"14175","class":"aquatic","team":0,"position":2,"stats":{"hp":55,"speed":41,"morale":33,"skill":35,"totalLastStand":3},"moveSet":[{"index":4,"part":{"id":"mouth-zigzag","name":"Zigzag","class":"plant","type":"mouth","mystic":false,"region":"global","stage":1,"moves":[{"id":"drain-bite","name":"Drain Bite","type":"melee","attack":15,"defense":12,"accuracy":74,"stage":1,"effects":[{"name":"Absorb","type":"active","description":"The user’s HP is restored by the damage done to the enemy."}]}]},"move":{"id":"drain-bite","name":"Drain Bite","type":"melee","attack":15,"defense":12,"accuracy":74,"stage":1,"effects":["absorb-active"]}},{"index":1,"part":{"id":"tail-hot-butt","name":"Hot Butt","class":"plant","type":"tail","mystic":false,"region":"global","stage":1,"moves":[{"id":"spicy-surprise","name":"Spicy Surprise","type":"melee","attack":18,"defense":14,"accuracy":70,"stage":1,"effects":[{"name":"Toothache","type":"passive","description":"When attacked, a 'Toothache' debuff is applied to attacking Axie. 'Toothache' reduces Axie's next mouth attack's Accuracy to 0."}]}]},"move":{"id":"spicy-surprise","name":"Spicy Surprise","type":"melee","attack":18,"defense":14,"accuracy":70,"stage":1,"effects":["toothache-passive"]}},{"index":2,"part":{"id":"back-red-ear","name":"Red Ear","class":"reptile","type":"back","mystic":false,"region":"global","stage":1,"moves":[{"id":"slippery-shield","name":"Slippery Shield","type":"melee","attack":13,"defense":18,"accuracy":74,"stage":1,"effects":[{"name":"Advantage Nullify","type":"active","description":"Ignore any advantage bonus from enemy's attack."}]}]},"move":{"id":"slippery-shield","name":"Slippery Shield","type":"melee","attack":13,"defense":18,"accuracy":74,"stage":1,"effects":["advantage-nullify-active"]}},{"index":3,"part":{"id":"horn-rose-bud","name":"Rose Bud","class":"plant","type":"horn","mystic":false,"region":"global","stage":1,"moves":[{"id":"natures-grace","name":"Nature's Grace","type":"support","attack":0,"defense":13,"accuracy":100,"stage":1,"effects":[{"name":"Heal","type":"active","description":"User heals itself for 1/4 of max HP."}]}]},"move":{"id":"natures-grace","name":"Nature's Grace","type":"support","attack":0,"defense":13,"accuracy":100,"stage":1,"effects":["heal-active"]}}]},{"id":"23332","class":"beast","team":0,"position":7,"stats":{"hp":39,"speed":44,"morale":50,"skill":31,"totalLastStand":4},"moveSet":[{"index":2,"part":{"id":"tail-yam","name":"Yam","class":"plant","type":"tail","mystic":false,"region":"global","stage":1,"moves":[{"id":"gas-unleash","name":"Gas Unleash","type":"ranged","attack":15,"defense":7,"accuracy":74,"stage":1,"effects":[{"name":"Poison","type":"active","description":"Apply a 'Poison' debuff to target."},{"name":"Poison","type":"passive","description":"When attacked, a 'Poison' debuff is applied to attacking Axie. Axie with 'Poison' loses 1 HP each turn."}]}]},"move":{"id":"gas-unleash","name":"Gas Unleash","type":"ranged","attack":15,"defense":7,"accuracy":74,"stage":1,"effects":["poison-active","poison-passive"]}},{"index":3,"part":{"id":"horn-strawberry-shortcake","name":"Strawberry Shortcake","class":"plant","type":"horn","mystic":false,"region":"global","stage":1,"moves":[{"id":"sweet-party","name":"Sweet Party","type":"support","attack":0,"defense":13,"accuracy":100,"stage":1,"effects":[{"name":"Heal ß","type":"active","description":"User heals 1/2 of max HP to bfront Ally."},{"name":"Heal ß","type":"passive","description":"When attacked, attacking Axie heals 1/2 of its max HP."}]}]},"move":{"id":"sweet-party","name":"Sweet Party","type":"support","attack":0,"defense":13,"accuracy":100,"stage":1,"effects":["heal-ß-active","heal-ß-passive"]}},{"index":4,"part":{"id":"back-blue-moon","name":"Blue Moon","class":"aquatic","type":"back","mystic":false,"region":"global","stage":1,"moves":[{"id":"scale-dart","name":"Scale Dart","type":"ranged","attack":24,"defense":6,"accuracy":66,"stage":1,"effects":[]}]},"move":{"id":"scale-dart","name":"Scale Dart","type":"ranged","attack":24,"defense":6,"accuracy":66,"stage":1,"effects":[]}},{"index":1,"part":{"id":"mouth-doubletalk","name":"Doubletalk","class":"bird","type":"mouth","mystic":false,"region":"global","stage":1,"moves":[{"id":"trash-talk","name":"Trash Talk","type":"ranged","attack":0,"defense":3,"accuracy":82,"stage":1,"effects":[{"name":"Sitting Duck","type":"active","description":"Apply a 'Sitting Duck' debuff to target for 1 turn. Axie with this debuff cannot defend."}]}]},"move":{"id":"trash-talk","name":"Trash Talk","type":"ranged","attack":0,"defense":3,"accuracy":82,"stage":1,"effects":["sitting-duck-active"]}}]},{"id":"17060","class":"bird","team":1,"position":9,"stats":{"hp":30,"speed":59,"morale":40,"skill":35,"totalLastStand":3},"moveSet":[{"index":4,"part":{"id":"back-blue-moon","name":"Blue Moon","class":"aquatic","type":"back","mystic":false,"region":"global","stage":1,"moves":[{"id":"scale-dart","name":"Scale Dart","type":"ranged","attack":24,"defense":6,"accuracy":66,"stage":1,"effects":[]}]},"move":{"id":"scale-dart","name":"Scale Dart","type":"ranged","attack":24,"defense":6,"accuracy":66,"stage":1,"effects":[]}},{"index":1,"part":{"id":"horn-eggshell","name":"Eggshell","class":"bird","type":"horn","mystic":false,"region":"global","stage":1,"moves":[{"id":"eggbomb","name":"Eggbomb","type":"ranged","attack":28,"defense":1,"accuracy":86,"stage":1,"effects":[{"name":"Tender α","type":"passive","description":" When attacked, a 'Tender α' debuff is applied to the user. This debuff adds 3 damage received to the affected Axie's next defense."}]}]},"move":{"id":"eggbomb","name":"Eggbomb","type":"ranged","attack":28,"defense":1,"accuracy":86,"stage":1,"effects":["tender-α-passive"]}},{"index":2,"part":{"id":"tail-navaga","name":"Navaga","class":"aquatic","type":"tail","mystic":false,"region":"global","stage":1,"moves":[{"id":"flanking-smack","name":"Flanking Smack","type":"melee","attack":23,"defense":9,"accuracy":66,"stage":1,"effects":[{"name":"First Strike","type":"passive","description":"+5 damage if this move is used in the first turn of any round."}]}]},"move":{"id":"flanking-smack","name":"Flanking Smack","type":"melee","attack":23,"defense":9,"accuracy":66,"stage":1,"effects":["first-strike-passive"]}},{"index":3,"part":{"id":"mouth-piranha","name":"Piranha","class":"aquatic","type":"mouth","mystic":false,"region":"global","stage":1,"moves":[{"id":"crimson-water","name":"Crimson Water","type":"melee","attack":26,"defense":8,"accuracy":66,"stage":1,"effects":[]}]},"move":{"id":"crimson-water","name":"Crimson Water","type":"melee","attack":26,"defense":8,"accuracy":66,"stage":1,"effects":[]}}]},{"id":"18602","class":"aquatic","team":1,"position":5,"stats":{"hp":50,"speed":49,"morale":30,"skill":35,"totalLastStand":2},"moveSet":[{"index":1,"part":{"id":"mouth-risky-fish","name":"Risky Fish","class":"aquatic","type":"mouth","mystic":false,"region":"global","stage":1,"moves":[{"id":"fish-hook","name":"Fish Hook","type":"melee","attack":25,"defense":8,"accuracy":70,"stage":1,"effects":[{"name":"Frenzy","type":"active","description":"Successful attacks on target with 'class advantage' apply a 'Frenzy α' buff on user. 'Frenzy α' adds 3 damage to the next attack."}]}]},"move":{"id":"fish-hook","name":"Fish Hook","type":"melee","attack":25,"defense":8,"accuracy":70,"stage":1,"effects":["frenzy-active"]}},{"index":2,"part":{"id":"horn-strawberry-shortcake","name":"Strawberry Shortcake","class":"plant","type":"horn","mystic":false,"region":"global","stage":1,"moves":[{"id":"sweet-party","name":"Sweet Party","type":"support","attack":0,"defense":13,"accuracy":100,"stage":1,"effects":[{"name":"Heal ß","type":"active","description":"User heals 1/2 of max HP to bfront Ally."},{"name":"Heal ß","type":"passive","description":"When attacked, attacking Axie heals 1/2 of its max HP."}]}]},"move":{"id":"sweet-party","name":"Sweet Party","type":"support","attack":0,"defense":13,"accuracy":100,"stage":1,"effects":["heal-ß-active","heal-ß-passive"]}},{"index":3,"part":{"id":"tail-gila","name":"Gila","class":"reptile","type":"tail","mystic":false,"region":"global","stage":1,"moves":[{"id":"venom-swing","name":"Venom Swing","type":"ranged","attack":17,"defense":10,"accuracy":74,"stage":1,"effects":[{"name":"Poison","type":"passive","description":"When attacked, a 'Poison' debuff is applied to the attacking Axie. Axies affected by'Poison' lose 1 HP each turn."}]}]},"move":{"id":"venom-swing","name":"Venom Swing","type":"ranged","attack":17,"defense":10,"accuracy":74,"stage":1,"effects":["poison-passive"]}},{"index":4,"part":{"id":"back-anemone","name":"Anemone","class":"aquatic","type":"back","mystic":false,"region":"global","stage":1,"moves":[{"id":"deadly-tendril","name":"Deadly Tendril","type":"melee","attack":22,"defense":10,"accuracy":70,"stage":1,"effects":[{"name":"Recreation","type":"active","description":"Restore 3 HP for each 'Anemone' part on user."}]}]},"move":{"id":"deadly-tendril","name":"Deadly Tendril","type":"melee","attack":22,"defense":10,"accuracy":70,"stage":1,"effects":["recreation-active"]}}]},{"id":"20813","class":"plant","team":1,"position":1,"stats":{"hp":54,"speed":40,"morale":39,"skill":31,"totalLastStand":3},"moveSet":[{"index":3,"part":{"id":"horn-anemone","name":"Anemone","class":"aquatic","type":"horn","mystic":false,"region":"global","stage":1,"moves":[{"id":"aquaponics","name":"Aquaponics","type":"ranged","attack":23,"defense":6,"accuracy":70,"stage":1,"effects":[{"name":"Recreation","type":"active","description":"Restore 3 HP for each 'Anemone' part on user."}]}]},"move":{"id":"aquaponics","name":"Aquaponics","type":"ranged","attack":23,"defense":6,"accuracy":70,"stage":1,"effects":["recreation-active"]}},{"index":4,"part":{"id":"mouth-serious","name":"Serious","class":"plant","type":"mouth","mystic":false,"region":"global","stage":1,"moves":[{"id":"vegetal-bite","name":"Vegetal Bite","type":"melee","attack":19,"defense":13,"accuracy":74,"stage":1,"effects":[]}]},"move":{"id":"vegetal-bite","name":"Vegetal Bite","type":"melee","attack":19,"defense":13,"accuracy":74,"stage":1,"effects":[]}},{"index":1,"part":{"id":"back-pumpkin","name":"Pumpkin","class":"plant","type":"back","mystic":false,"region":"global","stage":1,"moves":[{"id":"october-smash","name":"October Smash","type":"melee","attack":8,"defense":24,"accuracy":74,"stage":1,"effects":[]}]},"move":{"id":"october-smash","name":"October Smash","type":"melee","attack":8,"defense":24,"accuracy":74,"stage":1,"effects":[]}},{"index":2,"part":{"id":"tail-hot-butt","name":"Hot Butt","class":"plant","type":"tail","mystic":false,"region":"global","stage":1,"moves":[{"id":"spicy-surprise","name":"Spicy Surprise","type":"melee","attack":18,"defense":14,"accuracy":70,"stage":1,"effects":[{"name":"Toothache","type":"passive","description":"When attacked, a 'Toothache' debuff is applied to attacking Axie. 'Toothache' reduces Axie's next mouth attack's Accuracy to 0."}]}]},"move":{"id":"spicy-surprise","name":"Spicy Surprise","type":"melee","attack":18,"defense":14,"accuracy":70,"stage":1,"effects":["toothache-passive"]}}]}]},"entrances":[{"id":"1666","special":"origin"},{"id":"14175","special":"origin"},{"id":"23332","special":"origin"},{"id":"17060","special":"origin"},{"id":"18602","special":"origin"},{"id":"20813","special":"origin"}],"rounds":[{"turns":[{"id":1,"attacker":"17060","defender":"14175","hit":true,"hitChance":85.54166666666667,"counter":false,"counterChance":1.75,"damageDealt":11,"critical":false,"criticalChance":9.75,"attackerMoveIndex":1,"defenderMoveIndex":1,"effectsApplied":[{"id":"apply-debuff","targets":["17060"],"extra":{"buff":"toothache","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"14175","hp":44,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"20813","hp":54,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[1,2,3,4]}]},{"id":2,"attacker":"18602","defender":"14175","hit":true,"hitChance":71.54166666666667,"counter":false,"counterChance":4.25,"damageDealt":5,"critical":false,"criticalChance":4.75,"attackerMoveIndex":1,"defenderMoveIndex":2,"effectsApplied":[{"id":"advance-nullify","targets":["14175"],"extra":{"nullifyType":"attack"}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"14175","hp":39,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"20813","hp":54,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[1,2,3,4]}]},{"id":3,"attacker":"23332","defender":"20813","hit":true,"hitChance":84.33333333333333,"counter":false,"counterChance":8.5,"damageDealt":1,"critical":false,"criticalChance":15,"attackerMoveIndex":1,"defenderMoveIndex":1,"effectsApplied":[{"id":"apply-debuff","targets":["20813"],"extra":{"buff":"sitting-duck","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"14175","hp":39,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"20813","hp":53,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[{"id":"sitting-duck","turnLeft":1}],"moveSet":[2,3,4,1]}]},{"id":4,"attacker":"1666","defender":"20813","hit":true,"hitChance":92.33333333333333,"counter":false,"counterChance":8.75,"damageDealt":50,"critical":true,"criticalChance":29.5,"attackerMoveIndex":1,"defenderMoveIndex":2,"effectsApplied":[{"id":"apply-debuff","targets":["1666"],"extra":{"buff":"sitting-duck","totalTurns":2}},{"id":"apply-debuff","targets":["1666"],"extra":{"buff":"toothache","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"sitting-duck","turnLeft":2},{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"14175","hp":39,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"20813","hp":3,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":5,"attacker":"14175","defender":null,"hit":false,"hitChance":0,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":0,"attackerMoveIndex":3,"defenderMoveIndex":null,"effectsApplied":[{"id":"heal-target","targets":["14175"],"extra":{"totalHealed":13}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"sitting-duck","turnLeft":1},{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"14175","hp":52,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"20813","hp":3,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":6,"attacker":"20813","defender":"14175","hit":true,"hitChance":78.20833333333333,"counter":false,"counterChance":6.5,"damageDealt":16,"critical":true,"criticalChance":9.25,"attackerMoveIndex":3,"defenderMoveIndex":4,"effectsApplied":[{"id":"heal-target","targets":["20813"],"extra":{"totalHealed":3}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"14175","hp":36,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"20813","hp":6,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]}]},{"turns":[{"id":1,"attacker":"17060","defender":"14175","hit":true,"hitChance":67.54166666666667,"counter":false,"counterChance":1.75,"damageDealt":20,"critical":true,"criticalChance":9.75,"attackerMoveIndex":2,"defenderMoveIndex":1,"effectsApplied":[{"id":"bonus-damage","targets":["17060"],"extra":{"totalBonusDamage":5}},{"id":"apply-debuff","targets":["17060"],"extra":{"buff":"toothache","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"14175","hp":16,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"20813","hp":6,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]},{"id":2,"attacker":"18602","defender":null,"hit":false,"hitChance":0,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":0,"attackerMoveIndex":2,"defenderMoveIndex":null,"effectsApplied":[{"id":"heal-target","targets":["20813"],"extra":{"totalHealed":27}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"14175","hp":16,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"20813","hp":33,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]},{"id":3,"attacker":"23332","defender":"20813","hit":false,"hitChance":81.33333333333333,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":15,"attackerMoveIndex":2,"defenderMoveIndex":4,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"14175","hp":16,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"20813","hp":33,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[1,2,3,4]}]},{"id":4,"attacker":"1666","defender":"20813","hit":true,"hitChance":100.33333333333333,"counter":false,"counterChance":8.75,"damageDealt":4,"critical":false,"criticalChance":19.5,"attackerMoveIndex":2,"defenderMoveIndex":1,"effectsApplied":[{"id":"block-counter","targets":["1666"]}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"14175","hp":16,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"20813","hp":29,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[2,3,4,1]}]},{"id":5,"attacker":"14175","defender":"20813","hit":true,"hitChance":80.66666666666667,"counter":false,"counterChance":9.25,"damageDealt":2,"critical":false,"criticalChance":6.5,"attackerMoveIndex":2,"defenderMoveIndex":2,"effectsApplied":[{"id":"apply-debuff","targets":["14175"],"extra":{"buff":"toothache","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"14175","hp":16,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"20813","hp":27,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":6,"attacker":"20813","defender":"14175","hit":true,"hitChance":78.20833333333333,"counter":false,"counterChance":6.5,"damageDealt":7,"critical":false,"criticalChance":9.25,"attackerMoveIndex":3,"defenderMoveIndex":3,"effectsApplied":[{"id":"heal-target","targets":["20813"],"extra":{"totalHealed":3}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"14175","hp":9,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"20813","hp":30,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]}]},{"turns":[{"id":1,"attacker":"17060","defender":"14175","hit":false,"hitChance":1.541666666666666,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":9.75,"attackerMoveIndex":3,"defenderMoveIndex":4,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"14175","hp":9,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[1,2,3,4]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"20813","hp":30,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]},{"id":2,"attacker":"18602","defender":"14175","hit":true,"hitChance":83.54166666666667,"counter":false,"counterChance":4.25,"damageDealt":6,"critical":false,"criticalChance":4.75,"attackerMoveIndex":3,"defenderMoveIndex":1,"effectsApplied":[{"id":"apply-debuff","targets":["18602"],"extra":{"buff":"toothache","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"14175","hp":3,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":30,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]},{"id":3,"attacker":"23332","defender":null,"hit":false,"hitChance":0,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":0,"attackerMoveIndex":3,"defenderMoveIndex":null,"effectsApplied":[{"id":"heal-target","targets":["14175"],"extra":{"totalHealed":27}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"14175","hp":30,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":30,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[4,1,2,3]}]},{"id":4,"attacker":"1666","defender":"20813","hit":true,"hitChance":104.33333333333333,"counter":false,"counterChance":8.75,"damageDealt":36,"critical":true,"criticalChance":19.5,"attackerMoveIndex":3,"defenderMoveIndex":4,"effectsApplied":[{"id":"bonus-damage","targets":["1666"],"extra":{"totalBonusDamage":3}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"14175","hp":30,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":0,"lastStandLeft":3,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[1,2,3,4]}]},{"id":5,"attacker":"14175","defender":"20813","hit":true,"hitChance":80.66666666666667,"counter":false,"counterChance":9.25,"damageDealt":1,"critical":false,"criticalChance":6.5,"attackerMoveIndex":2,"defenderMoveIndex":1,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"14175","hp":30,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":0,"lastStandLeft":2,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[2,3,4,1]}]},{"id":6,"attacker":"20813","defender":"14175","hit":true,"hitChance":75.20833333333333,"counter":false,"counterChance":6.5,"damageDealt":22,"critical":true,"criticalChance":9.25,"attackerMoveIndex":2,"defenderMoveIndex":3,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"14175","hp":8,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":0,"lastStandLeft":1,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]}]},{"turns":[{"id":1,"attacker":"17060","defender":"14175","hit":false,"hitChance":65.54166666666667,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":9.75,"attackerMoveIndex":4,"defenderMoveIndex":4,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"14175","hp":8,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[1,2,3,4]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":2,"attacker":"18602","defender":"14175","hit":true,"hitChance":71.54166666666667,"counter":false,"counterChance":4.25,"damageDealt":6,"critical":false,"criticalChance":4.75,"attackerMoveIndex":4,"defenderMoveIndex":1,"effectsApplied":[{"id":"heal-target","targets":["18602"],"extra":{"totalHealed":3}},{"id":"apply-debuff","targets":["18602"],"extra":{"buff":"toothache","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"14175","hp":2,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[1,2,3,4]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":3,"attacker":"23332","defender":"18602","hit":false,"hitChance":67.20833333333333,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":12.75,"attackerMoveIndex":4,"defenderMoveIndex":1,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"14175","hp":2,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":4,"attacker":"1666","defender":"18602","hit":false,"hitChance":9.208333333333334,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":17.25,"attackerMoveIndex":4,"defenderMoveIndex":2,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"14175","hp":2,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":5,"attacker":"14175","defender":"18602","hit":false,"hitChance":79.54166666666667,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":4.25,"attackerMoveIndex":2,"defenderMoveIndex":3,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"14175","hp":2,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[1,2,3,4]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]}]},{"turns":[{"id":1,"attacker":"17060","defender":"14175","hit":true,"hitChance":85.54166666666667,"counter":false,"counterChance":1.75,"damageDealt":12,"critical":false,"criticalChance":9.75,"attackerMoveIndex":1,"defenderMoveIndex":3,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":31,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":2,"attacker":"18602","defender":"1666","hit":true,"hitChance":76.29166666666667,"counter":false,"counterChance":17.25,"damageDealt":24,"critical":false,"criticalChance":4.25,"attackerMoveIndex":4,"defenderMoveIndex":1,"effectsApplied":[{"id":"heal-target","targets":["18602"],"extra":{"totalHealed":3}}],"postTurnState":[{"id":"1666","hp":7,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"18602","hp":50,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[1,2,3,4]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":3,"attacker":"23332","defender":"18602","hit":true,"hitChance":83.20833333333333,"counter":false,"counterChance":4,"damageDealt":1,"critical":false,"criticalChance":12.75,"attackerMoveIndex":1,"defenderMoveIndex":1,"effectsApplied":[{"id":"apply-debuff","targets":["18602"],"extra":{"buff":"sitting-duck","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":7,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"18602","hp":49,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1},{"id":"sitting-duck","turnLeft":1}],"moveSet":[2,3,4,1]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":4,"attacker":"1666","defender":"18602","hit":true,"hitChance":105.33333333333333,"counter":false,"counterChance":4.25,"damageDealt":20,"critical":false,"criticalChance":29.5,"attackerMoveIndex":2,"defenderMoveIndex":2,"effectsApplied":[{"id":"block-counter","targets":["1666"]}],"postTurnState":[{"id":"1666","hp":7,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[2,3,4,1]},{"id":"18602","hp":29,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]}]},{"turns":[{"id":1,"attacker":"17060","defender":"1666","hit":true,"hitChance":77.29166666666667,"counter":false,"counterChance":14.75,"damageDealt":26,"critical":false,"criticalChance":9.25,"attackerMoveIndex":2,"defenderMoveIndex":3,"effectsApplied":[{"id":"bonus-damage","targets":["17060"],"extra":{"totalBonusDamage":5}}],"postTurnState":[{"id":"1666","hp":-1,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":39,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"18602","hp":29,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[3,4,1,2]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":2,"attacker":"18602","defender":"23332","hit":true,"hitChance":77.16666666666667,"counter":false,"counterChance":12.75,"damageDealt":7,"critical":false,"criticalChance":4,"attackerMoveIndex":3,"defenderMoveIndex":2,"effectsApplied":[{"id":"apply-debuff","targets":["18602"],"extra":{"buff":"poison","totalTurns":1}}],"postTurnState":[{"id":"1666","hp":-1,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":32,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[3,4,1,2]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"18602","hp":29,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1},{"id":"poison","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":3,"attacker":"23332","defender":null,"hit":false,"hitChance":0,"counter":false,"counterChance":0,"damageDealt":0,"critical":false,"criticalChance":0,"attackerMoveIndex":3,"defenderMoveIndex":null,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":-1,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":32,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[3,4,1,2]},{"id":"18602","hp":28,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1},{"id":"poison","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]}]},{"turns":[{"id":1,"attacker":"17060","defender":"23332","hit":true,"hitChance":72.16666666666667,"counter":false,"counterChance":10.25,"damageDealt":20,"critical":false,"criticalChance":9,"attackerMoveIndex":3,"defenderMoveIndex":4,"effectsApplied":[],"postTurnState":[{"id":"1666","hp":-1,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":12,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[1,2,3,4]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":27,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1},{"id":"poison","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]},{"id":2,"attacker":"18602","defender":"23332","hit":true,"hitChance":76.16666666666667,"counter":false,"counterChance":12.75,"damageDealt":21,"critical":false,"criticalChance":4,"attackerMoveIndex":4,"defenderMoveIndex":1,"effectsApplied":[{"id":"heal-target","targets":["18602"],"extra":{"totalHealed":3}}],"postTurnState":[{"id":"1666","hp":-1,"lastStandLeft":4,"morale":59,"speed":43,"skill":31,"buffs":[],"moveSet":[4,1,2,3]},{"id":"14175","hp":-1,"lastStandLeft":3,"morale":33,"speed":41,"skill":35,"buffs":[{"id":"toothache","turnLeft":1}],"moveSet":[4,1,2,3]},{"id":"23332","hp":-1,"lastStandLeft":4,"morale":50,"speed":44,"skill":31,"buffs":[],"moveSet":[2,3,4,1]},{"id":"17060","hp":30,"lastStandLeft":3,"morale":40,"speed":59,"skill":35,"buffs":[],"moveSet":[4,1,2,3]},{"id":"18602","hp":29,"lastStandLeft":2,"morale":30,"speed":49,"skill":35,"buffs":[{"id":"toothache","turnLeft":1},{"id":"poison","turnLeft":1}],"moveSet":[1,2,3,4]},{"id":"20813","hp":-1,"lastStandLeft":0,"morale":39,"speed":40,"skill":31,"buffs":[],"moveSet":[3,4,1,2]}]}]}],"result":{"winner":1,"defeat":0,"lastAlive":["17060","18602"]}}